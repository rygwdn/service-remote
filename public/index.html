<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="color-scheme" content="dark">
  <title>Service Remote</title>
  <link rel="stylesheet" href="/style.css">
</head>
<body>
  <header>
    <h1>Service Remote</h1>
    <div class="status-dots">
      <span class="dot" id="dot-obs" title="OBS"></span>
      <span class="dot-label">OBS</span>
      <span class="dot" id="dot-x32" title="X32"></span>
      <span class="dot-label">X32</span>
      <span class="dot" id="dot-proclaim" title="Proclaim"></span>
      <span class="dot-label">Proclaim</span>
    </div>
  </header>

  <nav class="tabs">
    <button class="tab active" data-tab="overview">Overview</button>
    <button class="tab" data-tab="proclaim">Proclaim</button>
    <button class="tab" data-tab="obs">OBS</button>
    <button class="tab" data-tab="sound">Sound</button>
    <button class="tab" data-tab="settings">Settings</button>
  </nav>

  <main>
    <!-- Overview Panel -->
    <section id="panel-overview" class="panel active">
      <div class="overview-grid">
        <!-- Proclaim -->
        <div class="ov-block ov-proclaim">
          <div class="ov-title">Proclaim</div>
          <div class="slide-strip">
            <div class="slide-thumb" id="ov-thumb-prev"></div>
            <div class="slide-thumb active" id="ov-thumb-current"></div>
            <div class="slide-thumb" id="ov-thumb-next"></div>
          </div>
          <div id="ov-now-playing" class="proclaim-now-playing"></div>
          <div class="control-row">
            <button class="btn btn-large" onclick="sendAction('PreviousSlide')">&#8592; Slide</button>
            <button class="btn btn-large" onclick="sendAction('NextSlide')">Slide &#8594;</button>
          </div>
        </div>

        <!-- OBS preview (read-only) -->
        <div class="ov-block ov-obs">
          <div class="ov-title">OBS &mdash; <span id="ov-current-scene"></span></div>
          <div class="ov-obs-preview-wrap">
            <img id="ov-obs-preview" class="ov-obs-preview" src="" alt="Program">
          </div>
          <div id="ov-stream-status" class="ov-status-row"></div>
        </div>

        <!-- X32 mix levels (read-only) -->
        <div class="ov-block ov-x32">
          <div class="ov-title">Mix</div>
          <div id="ov-channels" class="ov-channel-list"></div>
        </div>
      </div>
    </section>

    <!-- Proclaim Panel -->
    <section id="panel-proclaim" class="panel">
      <div class="slide-strip">
        <div class="slide-thumb" id="proclaim-thumb-prev"></div>
        <div class="slide-thumb active" id="proclaim-thumb-current"></div>
        <div class="slide-thumb" id="proclaim-thumb-next"></div>
      </div>
      <div id="proclaim-now-playing" class="proclaim-now-playing"></div>
      <div class="proclaim-controls">
        <div class="control-row">
          <button class="btn btn-large" onclick="sendAction('PreviousServiceItem')">Prev Item</button>
          <button class="btn btn-large" onclick="sendAction('NextServiceItem')">Next Item</button>
        </div>
        <div class="control-row">
          <button class="btn btn-large btn-primary" onclick="sendAction('PreviousSlide')">Prev Slide</button>
          <button class="btn btn-large btn-primary" onclick="sendAction('NextSlide')">Next Slide</button>
        </div>
      </div>
      <div id="proclaim-items" class="proclaim-items"></div>
    </section>

    <!-- OBS Panel -->
    <section id="panel-obs" class="panel">
      <div class="obs-section">
        <div class="ov-obs-preview-wrap">
          <img id="obs-preview" class="ov-obs-preview" src="" alt="Program">
        </div>
      </div>
      <div class="obs-section">
        <h2>Scenes</h2>
        <div id="obs-scenes" class="scene-grid"></div>
      </div>
      <div class="obs-section">
        <h2>Audio</h2>
        <div id="obs-audio" class="audio-list"></div>
      </div>
      <div class="obs-section">
        <h2>Output</h2>
        <div class="control-row">
          <button class="btn" id="obs-stream-btn" onclick="toggleStream()">Stream</button>
          <button class="btn" id="obs-record-btn" onclick="toggleRecord()">Record</button>
        </div>
      </div>
    </section>

    <!-- Sound (X32) Panel -->
    <section id="panel-sound" class="panel">
      <div id="x32-channels" class="channel-grid"></div>
    </section>

    <!-- Settings Panel -->
    <section id="panel-settings" class="panel">
      <div class="settings-section">
        <h2>OBS</h2>
        <label>Address <input type="text" id="cfg-obs-address" placeholder="ws://localhost:4455"></label>
        <label>Password <input type="password" id="cfg-obs-password" placeholder="(leave blank if none)"></label>
        <div class="discover-row">
          <button class="btn" onclick="discoverObs()">Auto-detect</button>
          <span class="discover-status" id="discover-obs-status"></span>
        </div>
      </div>

      <div class="settings-section">
        <h2>X32</h2>
        <label>Address <input type="text" id="cfg-x32-address" placeholder="192.168.1.100"></label>
        <label>Port <input type="number" id="cfg-x32-port" placeholder="10023"></label>
        <div class="discover-row">
          <button class="btn" onclick="discoverX32()">Auto-detect</button>
          <span class="discover-status" id="discover-x32-status"></span>
        </div>
        <h3>Channels</h3>
        <div id="cfg-x32-channels"></div>
        <button class="btn" style="margin-top:8px" onclick="addX32Channel()">+ Add Channel</button>
      </div>

      <div class="settings-section">
        <h2>Proclaim</h2>
        <label>Host <input type="text" id="cfg-proclaim-host" placeholder="127.0.0.1"></label>
        <label>Port <input type="number" id="cfg-proclaim-port" placeholder="52195"></label>
        <label>Password <input type="password" id="cfg-proclaim-password" placeholder="proclaim"></label>
        <div class="discover-row">
          <button class="btn" onclick="discoverProclaim()">Auto-detect</button>
          <span class="discover-status" id="discover-proclaim-status"></span>
        </div>
      </div>

      <div class="settings-footer">
        <button class="btn btn-primary" onclick="saveConfig()">Save &amp; Apply</button>
        <span class="discover-status" id="settings-save-status"></span>
      </div>
    </section>
  </main>

  <script src="/app.js"></script>
</body>
</html>
